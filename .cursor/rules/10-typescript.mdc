---
description: TypeScript patterns
globs: "**/*.ts,**/*.tsx"
alwaysApply: false
---

# TypeScript

## Type Safety (Zero Tolerance)
| ❌ FORBIDDEN | ✅ USE INSTEAD |
|--------------|----------------|
| `any` | `unknown` + type guards |
| `as any` | Correct type assertion |
| `@ts-ignore` | Fix the error |
| `!` assertion | Proper null checks |

## Naming
| Element | Convention |
|---------|------------|
| Variables/Functions | camelCase |
| Constants | SCREAMING_SNAKE |
| Classes/Types/Interfaces | PascalCase |
| Files | kebab-case |
| Booleans | `is`, `has`, `can` prefix |

## Imports
- When an import is used only as a type, use `import type` so the compiler can strip it and avoid circular dependency issues.

```typescript
// ❌ Barrel imports for large libs
import { Check } from 'lucide-react'

// ✅ Direct imports
import Check from 'lucide-react/dist/esm/icons/check'

// ✅ Type-only import
import type { User, CreateUserOptions } from './types';
```

- For runtime-validated data, prefer a schema (e.g. Zod) plus inferred types instead of hand-written types that can drift from reality.

## Functions and Parameters
- When a function takes more than two or three arguments, prefer a single options object instead of a long parameter list.
- When a function returns more than one value, return an object rather than a tuple (unless the language idiom is tuples).

## Error Handling
Use `Result<T, E>` for expected errors, exceptions for unexpected.

## Path Aliases

### Configuration
Keep path aliases in sync across all config files:

**tsconfig.json**
```json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"],
      "@components/*": ["src/components/*"],
      "@services/*": ["src/services/*"],
      "@hooks/*": ["src/hooks/*"],
      "@utils/*": ["src/utils/*"],
      "@types/*": ["src/types/*"]
    }
  }
}
```

**For bundlers (Vite, Webpack, etc.)**
```typescript
// vite.config.ts
resolve: {
  alias: {
    '@': path.resolve(__dirname, './src'),
    '@components': path.resolve(__dirname, './src/components'),
    // ... mirror tsconfig paths
  }
}
```

### Usage
```typescript
// ✅ Clean imports with aliases
import { Button } from '@components/ui/button';
import { useAuth } from '@hooks/use-auth';
import { formatDate } from '@utils/date';

// ❌ Avoid deep relative imports
import { Button } from '../../../components/ui/button';
```

### Rules
- Keep aliases consistent across all configs
- Use `@/` prefix for project root
- Domain-specific aliases: `@components`, `@services`, etc.
- Update all configs when adding new aliases
