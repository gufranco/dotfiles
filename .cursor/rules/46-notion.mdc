---
description: Notion page and database management patterns
alwaysApply: false
---

# Notion Automation

## Important Concepts

### Page vs Block Content
- **RETRIEVE_PAGE**: Returns metadata/properties only (NOT body content)
- **FETCH_BLOCK_CONTENTS**: Returns actual page body content

### Archive vs Delete
- Archive is soft-delete (sets `archived=true`)
- No permanent deletion via API

## Database Operations

### Query Filters
```json
// Single filter
{"property": "Status", "select": {"equals": "Done"}}

// Compound filter
{"and": [
  {"property": "Status", "select": {"equals": "In Progress"}},
  {"property": "Assignee", "people": {"contains": "user-id"}}
]}
```

### Property Types
- Property names are **case-sensitive**
- Formula, rollup, created_time are **read-only**
- Select values must match existing options

## Block Content
- Use `content_blocks` parameter (NOT `child_blocks`)
- Cannot append to archived pages (unarchive first)
- Persist block IDs from response for later edits

## Pagination
```
page_size: max 100
has_more: boolean
start_cursor / next_cursor: for next page
```

## Integration Sharing
- Pages/databases must be shared with the integration
- 404 errors often mean item not shared

## Best Practices
- Always paginate until `has_more` is false
- Match property names exactly (case-sensitive)
- Use search to resolve names to IDs
- Parse responses defensively (nested under `data` or `data_preview`)
